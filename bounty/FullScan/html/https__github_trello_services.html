<html><body><script src="https://p.trellocdn.com/power-up.min.js"></script><script>!function e(t,r,n){function o(u,c){if(!r[u]){if(!t[u]){var a="function"==typeof require&&require;if(!c&&a)return a(u,!0);if(i)return i(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var l=r[u]={exports:{}};t[u][0].call(l.exports,function(e){var r=t[u][1][e];return o(r||e)},l,l.exports,e,t,r,n)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<n.length;u++)o(n[u]);return o}({1:[function(e,t,r){"use strict";var n=e("../src/api"),o=e("../src/data-for-url"),i=e("../src/get-repos"),u=e("../src/github-button"),c=e("../src/i18n-settings"),a=e("../src/status"),s=e("../src/util"),l=e("../src/github-error"),p=e("../src/urls"),f=TrelloPowerUp.Promise,h="./images/icon.svg",m="./images/pull-request.svg",g=0;TrelloPowerUp.initialize({"attachment-sections":function(e,t){return n.getEndpoint(e).then(function(){var r=e.getContext().board,n=t.entries;return[{title:e.localizeKey("github_pull_requests"),test:p.isPull,url:'./pull-requests.html?ver=41f003e61c&',height:72},{title:e.localizeKey("github_issues"),test:p.isIssue,url:'./issues.html?ver=6d6768dee0&',height:64},{title:e.localizeKey("github_commits"),test:p.isCommit,url:'./commits.html?ver=7ac5a3d36c&',height:45},{title:e.localizeKey("github_branches"),test:p.isBranch,url:'./branches.html?ver=bdca47c518&',height:64}].map(function(t){var o=n.filter(function(e){return t.test(e.url,r)});return{claimed:o,icon:h,title:t.title,content:{type:"iframe",url:e.signUrl(t.url),height:t.height?o.length*t.height:void 0}}}).filter(function(e){return e.claimed.length>0})})},"attachment-thumbnail":function(e,t){return o(e,t.url).then(function(t){var r=t;return r.image={url:h,logo:!0},r.openText=e.localizeKey("open_in_github"),r}).catch(l,function(){throw e.NotHandled()})},"board-buttons":function(e){return n.getEndpoint(e),i(e).then(function(t){return 0===t.length?[]:1===t.length?[{icon:h,text:t[0].name,url:t[0].html_url}]:[{icon:h,text:[t.length,"repos"].join(" "),callback:function(r){return r.popup({title:e.localizeKey("repos"),items:t.map(function(e){return{text:e.full_name,url:e.html_url}})})}}]}).catch(l,function(){return[]})},"card-badges":function(e,t){var r=t.attachments.map(function(e){return e.url}),n=[],o=e.getContext().board,i=r.filter(function(e){return p.isGitHub(e,o)});if(!(i.length>0))return[];n.push({text:i.length,icon:h});var u=r.filter(function(e){return p.isPull(e,o)});return 0===u.length?n:(n.push({dynamic:function(){return g>100?{refresh:10,icon:m,text:e.localizeKey("loading_ellipsis")}:(g+=1,a.combined(e,u).timeout(4e3).then(function(t){if(g-=1,t.closed===t.count){var r=t.merged===t.count?e.localizeKey("merged"):e.localizeKey("closed");return{text:t.count+" "+r,icon:m}}return t.checks>0?{text:[t.pass,t.checks].join("/"),icon:m,color:s.statColor(t),refresh:s.statRefresh(t)}:{text:t.count,icon:m,refresh:300}}).catch(l,function(){throw g-=1,e.NotHandled()}).catch(f.TimeoutError,function(){return g-=1,{refresh:10,icon:m,text:e.localizeKey("loading_ellipsis")}}))}}),n)},"card-buttons":function(e){return e.memberCanWriteToModel("card")?[{icon:h,text:e.localizeKey("github"),callback:u}]:[]},"card-detail-badges":function(e){return n.getEndpoint(e).then(function(){return e.card("attachments")}).then(function(t){var r=e.getContext().board,n=t.attachments.map(function(e){return e.url}).filter(function(e){return p.isPull(e,r)});return 0===n.length?[]:[{dynamic:function(){return a.combined(e,n).then(function(t){if(t.closed!==t.count&&t.checks>0)return{title:e.localizeKey("github_checks"),text:t.pass+"/"+t.checks+" OK",icon:h,color:s.statColor(t),refresh:s.statRefresh(t)};throw e.NotHandled("no card detail badge necessary")}).catch(l,function(){throw e.NotHandled()})}}]})},"card-from-url":function(e,t){return o(e,t.url).then(function(e){return{name:e.title,desc:e.desc}}).catch(l,function(){throw e.NotHandled()})},"format-url":function(e,t){return o(e,t.url).then(function(e){return{icon:h,text:e.title}}).catch(l,function(){throw e.NotHandled()})},"show-settings":function(e){return e.popup({title:e.localizeKey("github_settings"),url:'settings.html?ver=aa09e3d036&',height:160})},"authorization-status":function(e){return n.getToken(e).then(function(e){return{authorized:null!=e}}).catch(function(){return{authorized:!1}})},"show-authorization":function(e){return e.popup({title:e.localizeKey("authorize"),url:'authorize.html?ver=2932d3f9ce&',height:140})}},{targetOrigin:"https://trello.com",localization:c})},{"../src/api":3,"../src/data-for-url":7,"../src/get-repos":8,"../src/github-button":9,"../src/github-error":10,"../src/i18n-settings":11,"../src/status":12,"../src/urls":13,"../src/util":14}],2:[function(e,t,r){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var o in r)n.call(r,o)&&(e[o]=r[o])}return e};var n=Object.prototype.hasOwnProperty},{}],3:[function(e,t,r){"use strict";var n=e("./comparators"),o=e("./github-error"),i=e("./config").PUBLIC_API_ENDPOINT,u=TrelloPowerUp.Promise,c={401:o.Unauthorized,404:o.NotFound},a=function(e,t){return new(c[e]||o.Unknown)(t)},s=function(e){return u.join(e.get("board","shared","endpoint"),e.get("organization","shared","endpoint")).spread(function(t,r){var n=t||r||i;try{var o=e.getContext().board;localStorage.setItem(o+"-endpoint",n)}catch(e){}return n})},l=function(e){return s(e).then(function(t){return e.loadSecret(t).then(function(r){if(r)return r;if(t===i)return u.join(e.get("board","private","token"),e.get("organization","private","token")).spread(function(e,t){return e||t}).then(function(t){return t?e.storeSecret(i,t).then(function(){return u.join(e.remove("board","private","token"),e.remove("organization","private","token"))}).then(function(){return t}):null});var n=void 0,o=void 0;try{n=localStorage.getItem("github-pat"),o=localStorage.getItem("pat-endpoint")}catch(e){return null}return o&&o===t&&n?e.storeSecret(t,n).then(function(){try{localStorage.removeItem("github-pat"),localStorage.removeItem("pat-endpoint")}catch(e){}return r}):null}).catch(function(e){return console.error(e.message),null})})},p=function(e){return l(e)},f=function(e,t,r){return p(e).then(function(e){return[e,t,r||{}]}).catch(function(){return[null,t,r||{}]})},h=function e(t,r){return new u(function(n,i){var u=new XMLHttpRequest;u.open("GET",t,!0),u.timeout=1e4,u.onload=function(){var t=void 0;try{t=JSON.parse(u.responseText)}catch(e){return i(new o.InvalidResponse(e.message))}if(200===u.status){if(t.length>0&&r-t.length>0){var c=(/<([^>]+)>; rel="next"/.exec(u.getResponseHeader("Link")||"")||[])[1];if(c)return e(c,r-t.length).then(function(e){return n(t.concat(e))}).catch(i)}return n(t)}return i(a(u.status,t.message))},u.ontimeout=function(){return i(new o.Timeout)},u.send()})},m=function(e,t,r,n){var i=t;return Array.isArray(t)&&(i=t.join("/")),f(e,i,r).spread(function(t,r,i){var u=i||{},c="?";if(e.isMemberSignedIn()){if(!t)throw new o.Unauthorized;u.access_token=t}return c+=Object.keys(u).map(function(e){return[e,encodeURIComponent(u[e])].join("=")}).join("&"),s(e).then(function(e){return 0!==r.indexOf(e)?h(e+"/"+r+c,n):h(r+c,n)})})},g=function(e,t,r,n,o,i){var u=t[r],c=o||{},a=n||{};return u=u.replace(/\{([?/])([^}]*)\}/g,function(e,t,r){switch(t){case"/":return Object.prototype.hasOwnProperty.call(a,r)?"/"+a[r]:"";case"?":return r.split(",").forEach(function(e){Object.prototype.hasOwnProperty.call(a,e)&&(c[e]=a[e])}),"";default:return""}}),m(e,u,c,i)},d=function(e){return m(e,"user")},_=n.sortByComparators(n.reverse(n.sortByAttr("pushed_at"))),b=function(e){return m(e,"user/repos",{sort:"pushed",per_page:100},1e3)},y=function(e){return d(e).then(function(t){return g(e,t,"events_url",{},{per_page:100},100)})};t.exports={get:m,post:function(e,t,r){return f(e,t,r).spread(function(t,n){return new u(function(i,u){if(!t)return u(new o.Unauthorized);var c=new XMLHttpRequest,l={};l.access_token=t;var p="?";return p+=Object.keys(l).map(function(e){return[e,encodeURIComponent(l[e])].join("=")}).join("&"),s(e).then(function(e){var t=n;0!==t.indexOf(e)&&(t=e+"/"+t),c.open("POST",t+p,!0),c.setRequestHeader("Content-Type","application/json"),c.onload=function(){var e=void 0;try{e=JSON.parse(c.responseText)}catch(e){return u(new o.InvalidResponse(e.message))}return 201===c.status||200===c.status?i(e):u(a(c.status,e.message))},c.send(JSON.stringify(r))})})})},getAllBranches:function(e,t){return g(e,t,"branches_url",{},{per_page:100},500)},getAllCommits:function(e,t,r){return g(e,t,"commits_url",{},{sha:r,per_page:100},500)},getAllOrgRepos:function(e,t){return m(e,["orgs",t,"repos"],1e3,_)},getAllOrgs:function(e){return m(e,["user","orgs"],100)},getAllPersonalRepos:function(e,t){return m(e,["users",t,"repos"],1e3,_)},getAllRepos:b,getAllReposSorted:function(e){return u.all([b(e),y(e)]).spread(function(e,t){var r={};return t.forEach(function(e){e.repo&&!r[e.repo.id]&&(r[e.repo.id]=e.created_at)}),e.forEach(function(e){e.user_active_at=r[e.id]||"1983-05-11T00:00:00:00Z"}),e.sort(n.sortByComparators(n.reverse(n.sortByAttr("user_active_at")),n.reverse(n.sortByAttr("pushed_at")))),e})},getBranch:function(e,t,r,n){return m(e,["repos",t,r,"branches",n])},getCommit:function(e,t,r,n){return m(e,["repos",t,r,"commits",n])},getCommitStatus:function(e,t,r,n){return m(e,["repos",t,r,"commits",n,"status"])},getIssue:function(e,t,r,n){return m(e,["repos",t,r,"issues",n])},getMe:d,getPull:function(e,t,r,n){return m(e,["repos",t,r,"pulls",n])},getRepo:function(e,t,r){return m(e,["repos",t,r])},getEndpoint:s,getToken:p,searchIssues:function(e,t,r,n){var o=t.map(function(e){return"repo:"+e}).join(" ");return m(e,["search","issues"],{q:r+" "+o+" type:issue",per_page:n},n).then(function(e){return e.items})},searchPullRequests:function(e,t,r,n){var o=t.map(function(e){return"repo:"+e}).join(" ");return m(e,["search","issues"],{q:r+" "+o+" type:pr",per_page:n},n).then(function(e){return e.items})}}},{"./comparators":5,"./config":6,"./github-error":10}],4:[function(e,t,r){"use strict";var n=e("./api"),o=e("./get-repos"),i=e("./github-error"),u=e("xtend"),c=TrelloPowerUp.Promise,a=function(e,t){return new c(function(r){return e.popup({title:e.localizeKey("authorize"),url:'authorize.html?ver=2932d3f9ce&',callback:function(e){return t(e).then(r)},height:140})})},s=function(e,t){return function e(r){return t(r).catch(i,function(t){if(t instanceof i.Unauthorized)return a(r,e);if(t instanceof i.InvalidRepo)return g(r,e);if(t instanceof i.InvalidBranch)return d(r,e);throw t})}(e)},l=function(e,t,r,n){r.chooseBranch&&t.push({text:e.localizeKey("choose_a_different_branch_ellipsis"),callback:function(e){return d(e,n)},alwaysVisible:!0}),r.chooseRepo&&t.push({text:e.localizeKey("choose_a_different_repo_ellipsis"),callback:function(e){return f(e,n)},alwaysVisible:!0})},p=function e(t,r,n,o){return s(t,function(t){return n.getList(t,o).then(function(o){return new c(function(i){var u=n.nameAttr||"name",a=o.map(function(e){return{text:e[u],callback:function(t){return c.try(function(){return n.set(e)}).then(function(e){return r(t,e)}).then(i)}}});return l(t,a,n,function(t,o){return e(t,r,n,o)}),t.popup({items:a,title:n.title,search:n.search})})})})},f=function(e,t){return p(e,t,{getList:function(e){return n.getAllReposSorted(e).map(function(e){return{repo:e,name:e.full_name}})},set:function(e){return{repo:{full_name:e.repo.full_name,name:e.repo.name,owner:{login:e.repo.owner.login,type:e.repo.owner.type}}}},title:e.localizeKey("choose_a_repo_ellipsis"),search:{count:10,placeholder:e.localizeKey("search_for_repo_ellipsis"),empty:e.localizeKey("no_repos_found")}})},h=function(e,t){return 1===t.length&&e===t[0]?null:t.some(function(t){return t.owner.login!==e.owner.login})?e.owner.full_name:e.name},m=function(e,t,r){return o(e,r).then(function(e){if(0===e.length)throw new i.InvalidRepo;return c.map(e,function(r){return c.props({items:t(r),prefix:h(r,e),repo:r})})}).then(function(e){return Array.prototype.concat.apply([],e.map(function(e){return e.items.map(function(t){return{item:t,prefix:e.prefix,repo:e.repo}})}))})},g=function(e,t){return p(e,t,{getList:function(e){return n.getAllReposSorted(e).map(function(e){return{name:e.full_name,repo:e}})},set:function(t){var r={full_name:t.repo.full_name,name:t.repo.name,owner:{login:t.repo.owner.login,type:t.repo.owner.type}};return e.get("board","shared","repos",[]).then(function(t){if(t.some(function(e){return e.name===r.name&&e.owner.login===r.owner.login}))return null;var n=t.slice();return n.push(r),e.set("board","shared","repos",n)})},title:e.localizeKey("choose_a_repo_ellipsis"),search:{count:10,placeholder:e.localizeKey("search_for_repo_ellipsis"),empty:e.localizeKey("no_repos_found")}})},d=function(e,t){return p(e,t,{getList:function(e,t){return m(e,function(t){return n.getAllBranches(e,t)},t).map(function(e){return u(e,{displayName:(e.prefix?e.prefix+" ":"")+e.item.name})})},nameAttr:"displayName",set:function(t){var r={name:t.item.name,repo:{name:t.repo.name,owner:{login:t.repo.owner.login,type:t.repo.owner.type}}};return e.set("board","private","branch",r).then(function(){return{branch:r}})},title:e.localizeKey("choose_a_branch_ellipsis"),search:{count:10,placeholder:e.localizeKey("search_for_branch_ellipsis"),empty:e.localizeKey("no_branches_found")},chooseRepo:!0})};t.exports={addChooseOther:l,getRepoItems:m,handleErrors:s,chooseRepo:g,chooseBranch:d}},{"./api":3,"./get-repos":8,"./github-error":10,xtend:2}],5:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e,t){var r=t.split("."),o=e,i=void 0;for(i=0;i<r.length;i++){if(!o||"object"!==(void 0===o?"undefined":n(o))||!Object.prototype.hasOwnProperty.call(o,r[i]))return null;o=o[r[i]]}return o},i=function(e){return"string"==typeof e?e.toLowerCase():e},u=function(e,t){var r=i(e),n=i(t);return r<n?-1:r>n?1:0},c=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,r){var n=void 0,i=0;for(n=0;n<t.length&&!i;n++)i=u(o(e,t[n]),o(r,t[n]));return i}};t.exports={sortByAttrs:c,sortByAttr:c,sortByComparators:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,r){var n=0,o=void 0;for(o=0;o<t.length&&!n;o++)n=t[o](e,r);return n}},reverse:function(e){return function(t,r){return e(r,t)}}}},{}],6:[function(e,t,r){"use strict";t.exports={GITHUB_PREFIX:/^https?:\/\/github\.com\//,PUBLIC_API_ENDPOINT:"https://api.github.com"}},{}],7:[function(e,t,r){"use strict";var n=e("./api"),o=e("./urls"),i=e("./util"),u=TrelloPowerUp.Promise;t.exports=function(e,t){return u.try(function(){var r=e.getContext().board,c=o.parse(t,r);if(!c.isGitHubUrl)throw e.NotHandled("not a github url");return c.isPull||c.isIssue?u.try(function(){return c.isPull?n.getPull(e,c.owner,c.repo,c.number):n.getIssue(e,c.owner,c.repo,c.number)}).then(function(e){return{url:t,title:e.title,created:Date.parse(e.created_at),createdBy:e.user.login,modified:Date.parse(e.updated_at)}}):c.isCommit?n.getCommit(e,c.owner,c.repo,c.hash).get("commit").then(function(e){return{url:t,title:i.firstLine(e.message),desc:i.afterFirstLine(e.message),created:Date.parse(e.committer.date),createdBy:e.committer.name}}):c.isRepo?n.getRepo(e,c.owner,c.repo).then(function(e){return{url:t,title:e.full_name,desc:e.description,created:Date.parse(e.created_at),modified:Date.parse(e.updated_at)}}):c.isBranch?{url:t,title:c.branch}:{url:t,title:t}})}},{"./api":3,"./urls":13,"./util":14}],8:[function(e,t,r){"use strict";var n=e("./api"),o=e("./github-error"),i=TrelloPowerUp.Promise;t.exports=function(e,t){return i.try(function(){return t&&t.repo?[t.repo]:e.get("board","shared","repos",[])}).map(function(t){return n.getRepo(e,t.owner.login,t.name).catch(o,function(){return null})}).filter(function(e){return e})}},{"./api":3,"./github-error":10}],9:[function(e,t,r){"use strict";var n=e("./api"),o=e("./choosers"),i=e("./get-repos"),u=e("./github-error"),c=e("./util"),a=e("xtend"),s=TrelloPowerUp.Promise,l=TrelloPowerUp.util.relativeUrl,p=function(e){return function(t){return s.all([t.attach({url:e.url,name:e.text}),t.card("name","url").then(function(r){return t.get("board","shared","disableComments").then(function(o){return e.commentsUrl&&!o?n.post(t,e.commentsUrl,{body:"![]("+l("images/mini-trello-icon.png")+") ["+r.name+"]("+r.url+")"}):null})})]).then(function(){return t.closePopup()})}},f=function e(t,r){return function(n,c){return o.handleErrors(n,function(n){return i(n).then(function(i){var s=i;if(c&&c.repo&&(s=[c.repo]),!s||0===s.length)throw new u.InvalidRepo;return n.popup({title:r.getTitle(c)||n.localizeKey("github"),items:function(n,i){return t(n,s,i.search).then(function(i){var u=i.map(function(e){return a(e,{callback:p(e)})});return o.addChooseOther(n,u,r,e(t,r)),u})},search:r.search})})})}},h=function e(t,r){return function(n,i){return o.handleErrors(n,function(u){return t(u,i).then(function(c){var s=c.map(function(e){return a(e,{callback:p(e)})});return o.addChooseOther(u,s,r,e(t,r)),u.popup({title:r.getTitle(i)||n.localizeKey("github"),items:s,search:r.search})})})}},m=function(e,t,r){var o=t.map(function(e){return e.full_name});return n.searchPullRequests(e,o,r,12).then(function(e){return e.map(function(e){var r=e;t.length>1&&(r.prefix=r.repository_url.substring(r.repository_url.lastIndexOf("/")+1));var n=r.prefix?r.prefix+" ":"";return{url:r.html_url,text:n+"#"+r.number+" "+r.title,commentsUrl:r.comments_url}})})},g=function(e){return e.get("board","private","branch",null).then(function(t){if(!t)throw new u.InvalidBranch;return n.getRepo(e,t.repo.owner.login,t.repo.name).then(function(r){return n.getAllCommits(e,r,t.name)})}).map(function(e){return{url:e.html_url,text:c.firstLine(e.commit.message),commentsUrl:e.comments_url}}).catch(u.NotFound,function(){throw new u.InvalidBranch})},d=function(e,t,r){var o=t.map(function(e){return e.full_name});return n.searchIssues(e,o,r,12).then(function(e){return e.map(function(e){var r=e;t.length>1&&(r.prefix=r.repository_url.substring(r.repository_url.lastIndexOf("/")+1));var n=r.prefix?r.prefix+" ":"";return{url:r.html_url,text:n+"#"+r.number+" "+r.title,commentsUrl:r.comments_url}})})},_=function(e,t){return o.getRepoItems(e,function(t){return n.getAllBranches(e,t)},t).then(function(e){return e.map(function(e){return{url:e.repo.html_url+"/tree/"+e.item.name,text:e.item.name}})})};t.exports=function(e){return e.popup({title:e.localizeKey("github"),items:[{text:e.localizeKey("attach_branch_ellipsis"),callback:h(_,{getTitle:function(t){return t&&t.repo?e.localizeKey("branches_from_owner_repo",{owner:t.repo.owner.login,repo:t.repo.name}):e.localizeKey("branches")},chooseRepo:!0,search:{count:10,placeholder:e.localizeKey("search_branches_ellipsis"),empty:e.localizeKey("no_branches_found")}})},{text:e.localizeKey("attach_commit_ellipsis"),callback:h(g,{getTitle:function(t){return t&&t.branch?e.localizeKey("commits_from_branch",{branch:t.branch.name}):e.localizeKey("commits")},chooseBranch:!0,search:{count:10,placeholder:e.localizeKey("search_commits_ellipsis"),empty:e.localizeKey("no_commits_found")}})},{text:e.localizeKey("attach_issue_ellipsis"),callback:f(d,{getTitle:function(t){return t&&t.repo?e.localizeKey("issues_from_owner_repo",{owner:t.repo.owner.login,repo:t.repo.name}):e.localizeKey("issues")},chooseRepo:!0,search:{placeholder:e.localizeKey("search_issues_ellipsis"),empty:e.localizeKey("no_issues_found"),searching:e.localizeKey("searching_issues_ellipsis")}})},{text:e.localizeKey("attach_pull_request_ellipsis"),callback:f(m,{getTitle:function(t){return t&&t.repo?e.localizeKey("pull_requests_from_owner_repo",{owner:t.repo.owner.login,repo:t.repo.name}):e.localizeKey("pull_requests")},chooseRepo:!0,search:{placeholder:e.localizeKey("search_pull_requests_ellipsis"),empty:e.localizeKey("no_pull_requests_found"),searching:e.localizeKey("searching_pull_requests_ellipsis")}})}]})}},{"./api":3,"./choosers":4,"./get-repos":8,"./github-error":10,"./util":14,xtend:2}],10:[function(e,t,r){"use strict";t.exports=TrelloPowerUp.util.makeErrorEnum("GitHub",["Unauthorized","Unknown","InvalidResponse","InvalidOrg","InvalidUser","InvalidOwner","InvalidRepo","InvalidPullRequest","InvalidCommit","InvalidIssue","InvalidBranch","NotFound","Timeout"])},{}],11:[function(e,t,r){"use strict";t.exports={defaultLocale:"en",supportedLocales:["cs","de","en","es","fi","fr","hu","it","ja","nb","nl","pl","pt-BR","ru","sv","th","tr","uk","vi","zh-Hans","zh-Hant"],resourceUrl:"./strings/{locale}.json?ver=20a28a3c7a"}},{}],12:[function(e,t,r){"use strict";var n=e("./api"),o=e("./urls"),i=TrelloPowerUp.Promise,u=function(e,t){return i.try(function(){var r=e.getContext().board,i=o.parse(t,r);if(!i.isPull)throw new Error("not a pull request");try{var u=sessionStorage.getItem(t);if(u&&(u=JSON.parse(u)),u&&("closed"===u.state||u.merged))return u}catch(e){}return n.getPull(e,i.owner,i.repo,i.number)}).then(function(r){var o={closed:"closed"===r.state,merged:r.merged,pass:0,fail:0,pending:0,checks:0},i=r.base.repo.full_name.split("/"),u=i[0],c=i[1];if(o.closed||o.merged){if(r.url)try{sessionStorage.setItem(t,JSON.stringify({state:r.state,merged:r.merged,base:{repo:{id:r.base.repo.id,name:r.base.repo.name,full_name:r.base.repo.full_name}},head:{ref:r.head.ref,sha:r.head.sha}}))}catch(e){}return o}return n.getCommitStatus(e,u,c,r.head.sha).then(function(e){e.total_count>0&&e.statuses&&(o.checks+=e.total_count,e.statuses.forEach(function(e){switch(e.state){case"success":o.pass++;break;case"pending":o.pending++;break;default:o.fail++}}))}).then(function(){return o})})};t.exports={single:u,combined:function(e,t){return i.map(t,function(t){return u(e,t)}).then(function(e){var t={pass:0,fail:0,pending:0,checks:0,closed:0,merged:0,count:0};return e.forEach(function(e){t.pass+=e.pass,t.fail+=e.fail,t.pending+=e.pending,t.checks+=e.checks,t.closed+=e.closed,t.merged+=e.merged,t.count++}),t})}}},{"./api":3,"./urls":13}],13:[function(e,t,r){"use strict";var n=e("./config"),o=n.PUBLIC_API_ENDPOINT,i=n.GITHUB_PREFIX,u=function(e,t){var r=void 0;try{r=localStorage.getItem(t+"-endpoint")}catch(e){}return r&&r!==o?0===e.indexOf(r.slice(0,-6)):i.test(e)},c=function(e){var t=/.*?\/.*?\/tree\/([^?]+)/;if(t.test(e.replace(i,""))){var r=t.exec(e.replace(i,""))[1];return encodeURIComponent(r)}return null},a=function(e,t){var r=void 0;try{r=localStorage.getItem(t+"-endpoint")}catch(e){}var n={url:e};if(!u(e,t))return n;n.isGitHubUrl=!0;var a=void 0;if(a=r&&r!==o?e.replace(r.slice(0,-6),"").split("/"):e.replace(i,"").split("/"),n.owner=a[0],n.repo=a[1],!a[2])return n.isRepo=!0,n;switch(a[2]){case"pull":n.number=parseInt(a[3],10),n.isPull=n.number>0;break;case"issues":n.number=parseInt(a[3],10),n.isIssue=n.number>0;break;case"commit":n.hash=a[3],n.isCommit=/^[0-9a-f]+$/.test(n.hash);break;case"tree":n.branch=c(e),n.isBranch=null!=n.branch&&n.branch.length>0}return n};t.exports={isGitHub:u,parse:a,isBranch:function(e,t){return a(e,t).isBranch},isIssue:function(e,t){return a(e,t).isIssue},isCommit:function(e,t){return a(e,t).isCommit},isPull:function(e,t){return a(e,t).isPull},isRepo:function(e,t){return a(e,t).isRepo}}},{"./config":6}],14:[function(e,t,r){"use strict";t.exports={statColor:function(e){return 0!==e.pending?"yellow":e.pass===e.checks?"green":"red"},statRefresh:function(e){return e.closed===e.count?0:e.pending>0||e.fail>0?60:300},firstLine:function(e){return e?/^[^\n]*/.exec(e)[0]:e},afterFirstLine:function(e){return/^\s*([^\n]*)\n?([\s\S]*?)\s*$/.exec(e||"")[2]},capitalize:function(e){return e&&e.length>0?e.substr(0,1).toUpperCase()+e.substr(1):e}}},{}]},{},[1]);</script></body></html>